[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "project_4/.external-ecmascript.js",
    "static": true,
    "longname": "project_4/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "file",
    "name": "project_4/helpers/Blockchain.js",
    "content": "/* ===== SHA256 with Crypto-js ===============================\n|  Learn more: Crypto-js: https://github.com/brix/crypto-js  |\n|  =========================================================*/\n\nconst SHA256 = require('crypto-js/sha256')\n\n// Configure LevelDB to persist blockchain data\nconst level = require('level')\nconst chainDB = './databases/chaindata'\nconst db = level(chainDB)\n\n// import util libs\nconst util = require('./util')\n\n// import block class\nconst Block = require('../models/Block')\n\n/* ===== Blockchain Class ==========================\n|  Class with a constructor for new blockchain \t\t|\n|  ================================================*/\n\nclass Blockchain {\n  constructor () {\n    // CRITERION: Genesis block persist as the first block in the blockchain using LevelDB.\n    this.getBlockHeight().then(height => {\n      // console.log(height)  // DEBUG\n      if (height === -1)\n        this.addBlock(new Block('Genesis block')).then(() => console.log('Genesis block stored!'))\n    })\n  }\n\n  // Add new block\n  // CRITERION: addBlock(newBlock) function includes a method to store newBlock with LevelDB.\n  async addBlock (newBlock) {\n    // previous block height\n    let previousBlockHeight = parseInt(await this.getBlockHeight())\n    // Block height\n    newBlock.height = previousBlockHeight + 1\n    // UTC timestamp\n    newBlock.time = new Date()\n      .getTime()\n      .toString()\n      .slice(0, -3)\n    // previous block hash\n    if (newBlock.height > 0) {\n      let previousBlock = await this.getBlock(previousBlockHeight)\n      newBlock.previousBlockHash = previousBlock.hash\n    }\n    // Block hash with SHA256 using newBlock and converting to a string\n    newBlock.hash = SHA256(JSON.stringify(newBlock)).toString()\n\n    // Adding block object to levelDB\n    await this.addLevelDBData(newBlock.height, JSON.stringify(newBlock))\n\n    // return the new block\n    return newBlock\n  }\n\n  // Get block height\n  // CRITERION: Modify getBlockHeight() function to retrieve current block height within the LevelDB chain.\n  async getBlockHeight () {\n    return await this.getBlockHeightLevel()\n  }\n\n  // get block\n  // CRITERION: Modify getBlock() function to retrieve a block by it's block heigh within the LevelDB chain.\n  async getBlock (blockHeight) {\n    let block = JSON.parse(await this.getLevelDBData(blockHeight))\n\n    // verify if ins't the Genesis block\n    if (parseInt(block.height) > 0) {\n      block.body.star.storyDecoded = Buffer.from(block.body.star.story, 'hex').toString()\n    }\n    // return object\n    return block\n  }\n\n  // get block by address\n  // CRITERION: Get endpoint with URL parameter for wallet address\n  async getBlocksByAddress (address) {\n    const blocks = []\n    let block = {}\n\n    return new Promise((resolve, reject) => {\n      db.createReadStream()\n        .on('data', data => {\n          if (data.key !== 0) {\n            block = JSON.parse(data.value)\n\n            if (block.body.address === address) {\n              block.body.star.storyDecoded = Buffer.from(block.body.star.story, 'hex').toString()\n              blocks.push(block)\n            }\n          }\n        })\n        .on('error', error => {\n          return reject(error)\n        })\n        .on('close', () => {\n          return resolve(blocks)\n        })\n    })\n  }\n\n  // get block by address\n  // CRITERION: Get endpoint with URL parameter for star block hash JSON Response\n  async getBlockByHash (hash) {\n    let block = {}\n\n    return new Promise((resolve, reject) => {\n      db.createReadStream()\n        .on('data', data => {\n          block = JSON.parse(data.value)\n\n          if (util.isStringChainEquals(block.hash, hash)) {\n            if (data.key !== 0) {\n              block.body.star.storyDecoded = Buffer.from(block.body.star.story, 'hex').toString()\n              return resolve(block)\n            } else {\n              return resolve(block)\n            }\n          }\n        })\n        .on('error', error => {\n          return reject(error)\n        })\n        .on('close', () => {\n          return reject('Block not found')\n        })\n    })\n  }\n\n  // validate block\n  // CRITERION: Modify the validateBlock() function to validate a block stored within levelDB\n  async validateBlock (blockHeight) {\n    // get block object\n    let block = await this.getBlock(blockHeight)\n    // get block hash\n    let blockHash = block.hash\n    // remove block hash to test block integrity\n    block.hash = ''\n\n    // generate block hash\n    let validBlockHash = SHA256(JSON.stringify(block)).toString()\n\n    // Compare\n    if (blockHash === validBlockHash) {\n      // return true if block is valid\n      return true\n    } else {\n      console.log('Block #' + blockHeight + ' invalid hash:\\n' + blockHash + '<>' + validBlockHash)\n      return false\n    }\n  }\n\n  // Validate blockchain\n  // CRITERION: Modify the validateChain() function to validate blockchain stored within levelDB\n  async validateChain () {\n    let errorLog = []\n    let blockChainHeight = await this.getBlockHeight()\n\n    for (let i = 0; i < blockChainHeight; i++) {\n      // validate a single block\n      if (!this.validateBlock(i)) errorLog.push(i)\n\n      // compare blocks hash link\n      let blockHash = this.getBlock(i).hash\n      let previousHash = this.getBlock(i + 1).previousBlockHash\n      if (blockHash !== previousHash) {\n        errorLog.push(i)\n      }\n    }\n\n    if (errorLog.length > 0) {\n      console.log('Block errors = ' + errorLog.length)\n      console.log('Blocks: ' + errorLog)\n    } else {\n      console.log('No errors detected')\n    }\n  }\n\n  /* ===== level db methods =====================================\n  |  Methods responsible for persisting data     \t\t          |\n  |  Learn more: level: https://github.com/Level/level      \t|\n  |  ==========================================================*/\n\n  getBlockHeightLevel () {\n    return new Promise((resolve, reject) => {\n      let height = -1\n      db.createReadStream()\n        .on('data', () => {\n          height++\n        })\n        .on('error', err => {\n          console.log('Unable to read data stream!', err)\n          reject(err)\n        })\n        .on('close', () => {\n          // console.log('Blockchain height is #' + height) // DEBUG\n          resolve(height)\n        })\n    })\n  }\n\n  // Add data to levelDB with key/value pair\n  addLevelDBData (key, value) {\n    return new Promise((resolve, reject) => {\n      db.put(key, value, err => {\n        if (err) {\n          console.log('Block ' + key + ' submission failed', err)\n          reject(err)\n        } else {\n          console.log('Block #' + key + ' stored')\n          resolve(value)\n        }\n      })\n    })\n  }\n\n  // Get data from levelDB with key\n  getLevelDBData (key) {\n    return new Promise((resolve, reject) => {\n      db.get(key, (err, value) => {\n        if (err) {\n          console.log('Not found!', err)\n          reject(err)\n        } else {\n          // console.log('Value = ' + value)  // DEBUG\n          resolve(value)\n        }\n      })\n    })\n  }\n}\n\nmodule.exports = Blockchain\n",
    "static": true,
    "longname": "/home/samuel/Dropbox/Projects/udacity-blockchain-developer-nanodegree/project_4/helpers/Blockchain.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 49,
    "kind": "variable",
    "name": "SHA256",
    "memberof": "project_4/helpers/Blockchain.js",
    "static": true,
    "longname": "project_4/helpers/Blockchain.js~SHA256",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/Blockchain.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 50,
    "kind": "variable",
    "name": "level",
    "memberof": "project_4/helpers/Blockchain.js",
    "static": true,
    "longname": "project_4/helpers/Blockchain.js~level",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/Blockchain.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 51,
    "kind": "variable",
    "name": "chainDB",
    "memberof": "project_4/helpers/Blockchain.js",
    "static": true,
    "longname": "project_4/helpers/Blockchain.js~chainDB",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/Blockchain.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 52,
    "kind": "variable",
    "name": "db",
    "memberof": "project_4/helpers/Blockchain.js",
    "static": true,
    "longname": "project_4/helpers/Blockchain.js~db",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/Blockchain.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 53,
    "kind": "variable",
    "name": "util",
    "memberof": "project_4/helpers/Blockchain.js",
    "static": true,
    "longname": "project_4/helpers/Blockchain.js~util",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/Blockchain.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 54,
    "kind": "variable",
    "name": "Block",
    "memberof": "project_4/helpers/Blockchain.js",
    "static": true,
    "longname": "project_4/helpers/Blockchain.js~Block",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/Blockchain.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 16,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 55,
    "kind": "class",
    "name": "Blockchain",
    "memberof": "project_4/helpers/Blockchain.js",
    "static": true,
    "longname": "project_4/helpers/Blockchain.js~Blockchain",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/Blockchain.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 56,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 23,
    "undocument": true
  },
  {
    "__docId__": 57,
    "kind": "method",
    "name": "addBlock",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#addBlock",
    "access": "public",
    "description": null,
    "lineNumber": 34,
    "undocument": true,
    "params": [
      {
        "name": "newBlock",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 58,
    "kind": "method",
    "name": "getBlockHeight",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#getBlockHeight",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 59,
    "kind": "method",
    "name": "getBlock",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#getBlock",
    "access": "public",
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "params": [
      {
        "name": "blockHeight",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 60,
    "kind": "method",
    "name": "getBlocksByAddress",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#getBlocksByAddress",
    "access": "public",
    "description": null,
    "lineNumber": 80,
    "undocument": true,
    "params": [
      {
        "name": "address",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 61,
    "kind": "method",
    "name": "getBlockByHash",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#getBlockByHash",
    "access": "public",
    "description": null,
    "lineNumber": 107,
    "undocument": true,
    "params": [
      {
        "name": "hash",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 62,
    "kind": "method",
    "name": "validateBlock",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#validateBlock",
    "access": "public",
    "description": null,
    "lineNumber": 135,
    "undocument": true,
    "params": [
      {
        "name": "blockHeight",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "boolean"
      ]
    }
  },
  {
    "__docId__": 63,
    "kind": "method",
    "name": "validateChain",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#validateChain",
    "access": "public",
    "description": null,
    "lineNumber": 158,
    "undocument": true,
    "params": [],
    "return": null
  },
  {
    "__docId__": 64,
    "kind": "method",
    "name": "getBlockHeightLevel",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#getBlockHeightLevel",
    "access": "public",
    "description": null,
    "lineNumber": 187,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 65,
    "kind": "method",
    "name": "addLevelDBData",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#addLevelDBData",
    "access": "public",
    "description": null,
    "lineNumber": 206,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      },
      {
        "name": "value",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 66,
    "kind": "method",
    "name": "getLevelDBData",
    "memberof": "project_4/helpers/Blockchain.js~Blockchain",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "project_4/helpers/Blockchain.js~Blockchain#getLevelDBData",
    "access": "public",
    "description": null,
    "lineNumber": 221,
    "undocument": true,
    "params": [
      {
        "name": "key",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 67,
    "kind": "file",
    "name": "project_4/helpers/ValidationUtil.js",
    "content": "// Configure LevelDB to access stars data\nconst level = require('level')\nconst chainDB = './databases/starchaindata'\nconst db = level(chainDB)\nconst defaultWindow = 300 // five minutes\n\n// lib to validate message\nconst bitcoinMessage = require('bitcoinjs-message')\n\n/**\n * Return current time.\n *\n * @returns {int} Return current timestamp\n * */\nfunction getCurrentTimeStamp () {\n  return new Date().getTime()\n}\n\n/**\n * Return the message created.\n * @param {String} address The address\n *\n * @returns {String} Return message with format [walletAddress]:[timeStamp]:starRegistry\n * */\nfunction generateMessage (address) {\n  return `${address}:${getCurrentTimeStamp()}:starRegistry`\n}\n\n/**\n * Check if request time stamp of value has expired.\n * @param {String} requestTimeStamp The timestamp from request\n *\n * @returns {Boolean} Return true if the timestamp from request is minus that five minutes\n * */\nfunction isExpired (requestTimeStamp) {\n  // time left < five minutes\n  return requestTimeStamp < Date.now() - 5 * 60 * 1000\n}\n\n// Util file to manage validation/signature\nconst validateUtil = {\n  // Check if signature is a signature valid\n  async isValidSignature (address) {\n    return db\n      .get(address)\n      .then(value => {\n        value = JSON.parse(value)\n        return value.messageSignature === 'valid'\n      })\n      .catch(() => {\n        throw new Error('Not authorized')\n      })\n  },\n\n  // Remove signature from leveldb\n  invalidateSignature (address) {\n    db.del(address)\n  },\n\n  // CRITERION: User obtains a response in JSON format with a message to sign.\n  saveRequestStarValidation: address => {\n    const message = generateMessage(address)\n\n    // CRITERION: Response should contain message details, request timestamp, and time remaining for validation window.\n    const data = {\n      address: address,\n      message: message,\n      requestTimeStamp: getCurrentTimeStamp(),\n      validationWindow: defaultWindow\n    }\n\n    db.put(data.address, JSON.stringify(data))\n\n    return data\n  },\n\n  // Save/return request star validation\n  async getPendingAddress (address) {\n    return new Promise((resolve, reject) => {\n      db.get(address, (error, value) => {\n        if (value === undefined) {\n          return reject(new Error('Not found'))\n        } else if (error) {\n          return reject(error)\n        }\n\n        value = JSON.parse(value)\n\n        // CRITERION: When re-submitting within validation window, validation window should reduce until it expires.\n        if (isExpired(value.requestTimeStamp)) {\n          resolve(this.saveRequestStarValidation(address))\n        } else {\n          // CRITERION: Response should contain message details, request timestamp, and time remaining for validation window.\n          const data = {\n            address: address,\n            message: value.message,\n            requestTimeStamp: value.requestTimeStamp,\n            // CRITERION: The request must be configured with a limited validation window of five minutes.\n            validationWindow: Math.floor(\n              (value.requestTimeStamp - (Date.now() - 5 * 60 * 1000)) / 1000\n            )\n          }\n\n          resolve(data)\n        }\n      })\n    })\n  },\n\n  // CRITERION: Web API post endpoint validates message signature with JSON response.\n  async validateMessageSignature (address, signature) {\n    return new Promise((resolve, reject) => {\n      db.get(address, (error, value) => {\n        if (value === undefined) {\n          return reject(new Error('Not found'))\n        } else if (error) {\n          return reject(error)\n        }\n\n        value = JSON.parse(value)\n\n        if (value.messageSignature === 'valid') {\n          return resolve({\n            registerStar: true,\n            status: value\n          })\n        } else {\n          let isValid = false\n\n          // Check if request timeStamp is < that five minutes\n          if (isExpired(value.requestTimeStamp)) {\n            // Set validation window to zero\n            value.validationWindow = 0\n            // Inform expired validation message\n            value.messageSignature = 'Validation expired!'\n          } else {\n            // CRITERION: The request must be configured with a limited validation window of five minutes.\n            value.validationWindow = Math.floor(\n              (value.requestTimeStamp - (Date.now() - 5 * 60 * 1000)) / 1000\n            )\n\n            try {\n              // CRITERION: The application will validate their request and grant access to register a star.\n              isValid = bitcoinMessage.verify(value.message, address, signature)\n            } catch (error) {\n              isValid = false\n            }\n\n            value.messageSignature = isValid ? 'valid' : 'invalid'\n          }\n\n          db.put(address, JSON.stringify(value))\n\n          return resolve({\n            registerStar: !isExpired(value.requestTimeStamp) && isValid,\n            status: value\n          })\n        }\n      })\n    })\n  }\n}\n\nmodule.exports = validateUtil\n",
    "static": true,
    "longname": "/home/samuel/Dropbox/Projects/udacity-blockchain-developer-nanodegree/project_4/helpers/ValidationUtil.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 68,
    "kind": "variable",
    "name": "level",
    "memberof": "project_4/helpers/ValidationUtil.js",
    "static": true,
    "longname": "project_4/helpers/ValidationUtil.js~level",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/ValidationUtil.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 69,
    "kind": "variable",
    "name": "chainDB",
    "memberof": "project_4/helpers/ValidationUtil.js",
    "static": true,
    "longname": "project_4/helpers/ValidationUtil.js~chainDB",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/ValidationUtil.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 70,
    "kind": "variable",
    "name": "db",
    "memberof": "project_4/helpers/ValidationUtil.js",
    "static": true,
    "longname": "project_4/helpers/ValidationUtil.js~db",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/ValidationUtil.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 71,
    "kind": "variable",
    "name": "defaultWindow",
    "memberof": "project_4/helpers/ValidationUtil.js",
    "static": true,
    "longname": "project_4/helpers/ValidationUtil.js~defaultWindow",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/ValidationUtil.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 72,
    "kind": "variable",
    "name": "bitcoinMessage",
    "memberof": "project_4/helpers/ValidationUtil.js",
    "static": true,
    "longname": "project_4/helpers/ValidationUtil.js~bitcoinMessage",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/ValidationUtil.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 73,
    "kind": "function",
    "name": "getCurrentTimeStamp",
    "memberof": "project_4/helpers/ValidationUtil.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "project_4/helpers/ValidationUtil.js~getCurrentTimeStamp",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/ValidationUtil.js",
    "importStyle": null,
    "description": "Return current time.",
    "lineNumber": 15,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{int} Return current timestamp"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "int"
      ],
      "spread": false,
      "description": "Return current timestamp"
    },
    "params": [],
    "ignore": true
  },
  {
    "__docId__": 74,
    "kind": "function",
    "name": "generateMessage",
    "memberof": "project_4/helpers/ValidationUtil.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "project_4/helpers/ValidationUtil.js~generateMessage",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/ValidationUtil.js",
    "importStyle": null,
    "description": "Return the message created.",
    "lineNumber": 25,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} Return message with format [walletAddress]:[timeStamp]:starRegistry"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "address",
        "description": "The address"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "Return message with format [walletAddress]:[timeStamp]:starRegistry"
    },
    "ignore": true
  },
  {
    "__docId__": 75,
    "kind": "function",
    "name": "isExpired",
    "memberof": "project_4/helpers/ValidationUtil.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "project_4/helpers/ValidationUtil.js~isExpired",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/ValidationUtil.js",
    "importStyle": null,
    "description": "Check if request time stamp of value has expired.",
    "lineNumber": 35,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean} Return true if the timestamp from request is minus that five minutes"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "requestTimeStamp",
        "description": "The timestamp from request"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": "Return true if the timestamp from request is minus that five minutes"
    },
    "ignore": true
  },
  {
    "__docId__": 76,
    "kind": "variable",
    "name": "validateUtil",
    "memberof": "project_4/helpers/ValidationUtil.js",
    "static": true,
    "longname": "project_4/helpers/ValidationUtil.js~validateUtil",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/ValidationUtil.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "{\"isValidSignature\": function, \"invalidateSignature\": function, \"saveRequestStarValidation\": *, \"getPendingAddress\": function, \"validateMessageSignature\": function}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 77,
    "kind": "file",
    "name": "project_4/helpers/util.js",
    "content": "const util = {\n  /**\n   * Verify if the object is empty\n   *\n   * @param {Object} obj  Object to verify\n   * @returns {Boolean} Return true if the object is empty\n   */\n  empty: obj => {\n    if (obj === true) return false\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key)) return false\n    }\n    return true\n  },\n\n  /**\n   * Verify if the object is ASCII\n   *\n   * @param {String} str  String to verify\n   * @returns {Boolean} Return true if the object is ASCII\n   */\n  isASCII: str => {\n    return /^[\\x00-\\x7F]*$/.test(str)\n  },\n\n  /**\n   * Check if two strings are equal avoiding timing attacks.\n   * See more in: https://snyk.io/blog/node-js-timing-attack-ccc-ctf\n   *\n   * @param {String} a  First string of verification\n   * @param {String} b  First string of verification\n   * @returns {Boolean} Returns true if the two strings are exactly the same\n   */\n  isStringChainEquals: (a, b) => {\n    let mismatch = 0\n    for (let i = 0; i < a.length; ++i) {\n      mismatch |= a.charCodeAt(i) ^ b.charCodeAt(i)\n    }\n    return !mismatch\n  }\n}\n\nmodule.exports = util\n",
    "static": true,
    "longname": "/home/samuel/Dropbox/Projects/udacity-blockchain-developer-nanodegree/project_4/helpers/util.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 78,
    "kind": "variable",
    "name": "util",
    "memberof": "project_4/helpers/util.js",
    "static": true,
    "longname": "project_4/helpers/util.js~util",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/helpers/util.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 1,
    "undocument": true,
    "type": {
      "types": [
        "{\"empty\": *, \"isASCII\": *, \"isStringChainEquals\": *}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 79,
    "kind": "file",
    "name": "project_4/models/Block.js",
    "content": "/* ===== Block Class ==============================\n|  Class with a constructor for block \t\t\t   |\n|  ===============================================*/\n\nclass Block {\n  constructor (data) {\n    this.hash = ''\n    this.height = 0\n    this.body = data\n    this.time = 0\n    this.previousBlockHash = ''\n  }\n}\nmodule.exports = Block\n",
    "static": true,
    "longname": "/home/samuel/Dropbox/Projects/udacity-blockchain-developer-nanodegree/project_4/models/Block.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 80,
    "kind": "class",
    "name": "Block",
    "memberof": "project_4/models/Block.js",
    "static": true,
    "longname": "project_4/models/Block.js~Block",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/models/Block.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "interface": false,
    "ignore": true
  },
  {
    "__docId__": 81,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "project_4/models/Block.js~Block",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "project_4/models/Block.js~Block#constructor",
    "access": "public",
    "description": null,
    "lineNumber": 6,
    "undocument": true
  },
  {
    "__docId__": 82,
    "kind": "member",
    "name": "hash",
    "memberof": "project_4/models/Block.js~Block",
    "static": false,
    "longname": "project_4/models/Block.js~Block#hash",
    "access": "public",
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 83,
    "kind": "member",
    "name": "height",
    "memberof": "project_4/models/Block.js~Block",
    "static": false,
    "longname": "project_4/models/Block.js~Block#height",
    "access": "public",
    "description": null,
    "lineNumber": 8,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 84,
    "kind": "member",
    "name": "body",
    "memberof": "project_4/models/Block.js~Block",
    "static": false,
    "longname": "project_4/models/Block.js~Block#body",
    "access": "public",
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 85,
    "kind": "member",
    "name": "time",
    "memberof": "project_4/models/Block.js~Block",
    "static": false,
    "longname": "project_4/models/Block.js~Block#time",
    "access": "public",
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 86,
    "kind": "member",
    "name": "previousBlockHash",
    "memberof": "project_4/models/Block.js~Block",
    "static": false,
    "longname": "project_4/models/Block.js~Block#previousBlockHash",
    "access": "public",
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 87,
    "kind": "file",
    "name": "project_4/server.js",
    "content": "// import dependencies\nconst Blockchain = require('./helpers/Blockchain')\nconst blockchain = new Blockchain()\nconst Block = require('./models/Block')\n\n// import validator\nconst { check, validationResult } = require('express-validator/check')\n\n// import util libs\nconst validateUtil = require('./helpers/ValidationUtil')\nconst util = require('./helpers/util')\n\nconst express = require('express')\nconst app = express()\n\napp.use(express.json())\napp.use(express.urlencoded({ extended: false }))\n\napp.listen(8000, () => console.log('Server started and listening on port 8000!'))\n\n//----------------------------------------------------------------------------------------------------------------------\n// URL post http://localhost:8000/requestValidation\n// Validate User Request\napp.post(\n  '/requestValidation',\n  [\n    // address must be required\n    check('address')\n      .not()\n      .isEmpty()\n  ],\n  async (req, res) => {\n    // check data entries\n    const errors = validationResult(req)\n    if (!errors.isEmpty()) {\n      return res.status(422).json({ errors: errors.array() })\n    }\n\n    let data = {}\n\n    try {\n      data = await validateUtil.getPendingAddress(req.body.address)\n    } catch (err) {\n      console.log(err)\n      data = await validateUtil.saveRequestStarValidation(req.body.address)\n    }\n\n    res.json(data)\n  }\n)\n\n//----------------------------------------------------------------------------------------------------------------------\n// URL post http://localhost:8000/message-signature/validate\n// Allow User Message Signature\napp.post(\n  '/message-signature/validate',\n  [\n    // address must be required\n    check('address')\n      .not()\n      .isEmpty(),\n    // signature must be required\n    check('signature')\n      .not()\n      .isEmpty()\n  ],\n  async (req, res) => {\n    // check data entries\n    const errors = validationResult(req)\n    if (!errors.isEmpty()) {\n      return res.status(422).json({ errors: errors.array() })\n    }\n\n    try {\n      const response = await validateUtil.validateMessageSignature(\n        req.body.address,\n        req.body.signature\n      )\n\n      if (response.registerStar) {\n        res.json(response)\n      } else {\n        res.status(401).json(response)\n      }\n    } catch (error) {\n      res.status(404).json({\n        status: 404,\n        message: error.message\n      })\n    }\n  }\n)\n\n//----------------------------------------------------------------------------------------------------------------------\n// URL post http://localhost:8000/stars/address:address\n// Blockchain Wallet Address\napp.get('/stars/address:address', async (req, res) => {\n  blockchain\n    .getBlocksByAddress(req.params.address.slice(1))\n    .then(success => {\n      res.send(success)\n    })\n    .catch(() => {\n      res.status(404).json({\n        status: 404,\n        message: 'Block not found'\n      })\n    })\n})\n\n//----------------------------------------------------------------------------------------------------------------------\n// URL post http://localhost:8000/stars/hash:hash\n// Star Block Hash\napp.get('/stars/hash:hash', async (req, res) => {\n  blockchain\n    .getBlockByHash(req.params.hash.slice(1))\n    .then(success => {\n      res.send(success)\n    })\n    .catch(() => {\n      res.status(404).json({\n        status: 404,\n        message: 'Block not found'\n      })\n    })\n})\n\n//----------------------------------------------------------------------------------------------------------------------\n// URL get http://localhost:8000/block/{BLOCK_HEIGHT}\n// Star Block Height\napp.get('/block/:blockHeight', (req, res) => {\n  blockchain\n    .getBlock(req.params.blockHeight)\n    .then(success => {\n      // The block contents must respond to GET request with block contents in JSON format\n      res.json(success)\n    })\n    .catch(() => {\n      res.status(404).json({\n        status: 404,\n        message: 'Block not found'\n      })\n    })\n})\n\n//----------------------------------------------------------------------------------------------------------------------\n// URL post http://localhost:8000/block\n// Post block in blockchain - Star Registration Endpoint\napp.post(\n  '/block',\n  [\n    // address must be required\n    check('address')\n      .not()\n      .isEmpty(),\n    // star must be required\n    check('star').custom(star => {\n      // CRITERION: Star object and properties are stored within the body of the block.\n      // CRITERION: Star properties include the coordinates with encoded story.\n      // CRITERION: Star story supports ASCII text, limited to 250 words (500 bytes), and hex encoded.\n      if (util.empty(star)) {\n        return Promise.reject('Star object is required')\n      }\n      if (util.empty(star.ra)) {\n        return Promise.reject('Ra is required')\n      }\n      if (util.empty(star.dec)) {\n        return Promise.reject('Dec is required')\n      }\n      if (util.empty(star.story)) {\n        return Promise.reject('Story is required')\n      }\n      if (star.story.length > 500) {\n        return Promise.reject('Story is limited to 500 words. Maximum size is 500 bytes')\n      }\n      if (!util.isASCII(star.story)) {\n        return Promise.reject('Story contains non-ASCII symbols')\n      }\n      return true\n    })\n  ],\n  async (req, res) => {\n    // check data entries\n    const errors = validationResult(req)\n    if (!errors.isEmpty()) {\n      return res.status(422).json({ errors: errors.array() })\n    }\n\n    try {\n      // Deny registration of a block if he/she did not send a valid signature\n      const isValid = await validateUtil.isValidSignature(req.body.address)\n\n      if (!isValid) {\n        throw new Error('Signature is not valid')\n      }\n    } catch (error) {\n      res.status(401).json({\n        status: 401,\n        message: error.message\n      })\n\n      return\n    }\n\n    // CRITERION: Star story must be encoded to hex before adding the block.\n    let star = req.body.star\n    // Encode the star story to hex here before making the block.\n    star.story = Buffer.from(req.body.star.story).toString('hex')\n\n    // organize the block to create\n    const block = {\n      address: req.body.address,\n      star: star\n    }\n\n    blockchain\n      .addBlock(new Block(block))\n      .then(success => {\n        // Override the previous request to prevent the user from placing additional blocks.\n        // He/she should return to request Validation and sign a new message in order to add another block.\n        validateUtil.invalidateSignature(req.body.address)\n\n        // Note: addBlock method was modified to return the block created\n        res.status(201).send(success)\n      })\n      .catch(() => {\n        // return a message in json format with error\n        res.json({ error: 'There was an error generating a new block' })\n      })\n  }\n)\n//----------------------------------------------------------------------------------------------------------------------\n// Send 404 erro, route not found\napp.get('*', (req, res) => {\n  res.status(404).json({\n    status: 404,\n    message: 'Route not found. Check documentation.'\n  })\n})\n//----------------------------------------------------------------------------------------------------------------------\n",
    "static": true,
    "longname": "/home/samuel/Dropbox/Projects/udacity-blockchain-developer-nanodegree/project_4/server.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 88,
    "kind": "variable",
    "name": "Blockchain",
    "memberof": "project_4/server.js",
    "static": true,
    "longname": "project_4/server.js~Blockchain",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/server.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 2,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 89,
    "kind": "variable",
    "name": "blockchain",
    "memberof": "project_4/server.js",
    "static": true,
    "longname": "project_4/server.js~blockchain",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/server.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "project_4/helpers/Blockchain.js~Blockchain"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 90,
    "kind": "variable",
    "name": "Block",
    "memberof": "project_4/server.js",
    "static": true,
    "longname": "project_4/server.js~Block",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/server.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 91,
    "kind": "variable",
    "name": "check",
    "memberof": "project_4/server.js",
    "static": true,
    "longname": "project_4/server.js~check",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/server.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 92,
    "kind": "variable",
    "name": "validateUtil",
    "memberof": "project_4/server.js",
    "static": true,
    "longname": "project_4/server.js~validateUtil",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/server.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 93,
    "kind": "variable",
    "name": "util",
    "memberof": "project_4/server.js",
    "static": true,
    "longname": "project_4/server.js~util",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/server.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 11,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 94,
    "kind": "variable",
    "name": "express",
    "memberof": "project_4/server.js",
    "static": true,
    "longname": "project_4/server.js~express",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/server.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 13,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 95,
    "kind": "variable",
    "name": "app",
    "memberof": "project_4/server.js",
    "static": true,
    "longname": "project_4/server.js~app",
    "access": "public",
    "export": false,
    "importPath": "project_4/project_4/server.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "kind": "index",
    "content": "# Udacity Blockchain Developer Nanodegree - Project 4\n\n\nWelcome to Project 4: Build a Private Blockchain Notary Service!\n\nIn this project, you'll build a Star Registry service that allows users to claim ownership of their favorite star in the night sky.\n\nTo do this, you'll add functionality to the Web API you built in Project 3: Web Services. You'll connect this web service to your own private blockchain, allowing users to notarize ownership of a digital asset, in this case whichever star they choose.\n\nYou'll do this using skills you've learn throughout the program, and by solving some new challenges you haven't quite seen before. The goal is to apply the tools and knowledge you've developed so far to solve new problems that are relevant to your career as a blockchain developer.\n\n## Select Node.js framework\n\nFor the development of the project we used the [Express framework](https://expressjs.com/).\n\n## See project code documentation\n\n```\nnpm run esdoc:open\n```\n\n## Getting Started\n\n```\nnpm install\n```\n\n## Run the project\n\n```\nnpm start\n```\n\n## Project endpoints\n\nSeveral tools are available on the internet to assist with API development and testing. If your having troubles testing your endpoints, try one of the tools listed below:\n\n* Postman is a powerful tool used to test web services. It was developed for sending HTTP requests in a simple and quick way.\n* CURL is a command-line tool used to deliver requests supporting a variety of protocols like HTTP, HTTPS, FTP, FTPS, SFTP, and many more.\n\n\n_Validate User Request endpoint:_\n```\nhttp://localhost:8000/requestValidation\n```\n\nCurl example:\n```\ncurl -X \"POST\" \"http://localhost:8000/requestValidation\" \\\n     -H 'Content-Type: application/json; charset=utf-8' \\\n     -d $'{\n  \"address\": \"142BDCeSGbXjWKaAnYXbMpZ6sbrSAo3DpZ\"\n}'\n```\n\n_Allow User Message Signature endpoint:_\n```\nhttp://localhost:8000/message-signature/validate\n```\n\nCurl example:\n```\ncurl -X \"POST\" \"http://localhost:8000/message-signature/validate\" \\\n     -H 'Content-Type: application/json; charset=utf-8' \\\n     -d $'{\n  \"address\": \"142BDCeSGbXjWKaAnYXbMpZ6sbrSAo3DpZ\",\n  \"signature\": \"H6ZrGrF0Y4rMGBMRT2+hHWGbThTIyhBS0dNKQRov9Yg6GgXcHxtO9GJN4nwD2yNXpnXHTWU9i+qdw5vpsooryLU=\"\n}'\n```\n\n_Block with star object endpoint:_\n```\nhttp://localhost:8000/block\n```\n\nCurl example:\n```\ncurl -X \"POST\" \"http://localhost:8000/block\" \\\n     -H 'Content-Type: application/json; charset=utf-8' \\\n     -d $'{\n  \"address\": \"142BDCeSGbXjWKaAnYXbMpZ6sbrSAo3DpZ\",\n  \"star\": {\n    \"dec\": \"-26 29'\\'' 24.9\",\n    \"ra\": \"16h 29m 1.0s\",\n    \"story\": \"Found star using https://www.google.com/sky/\"\n  }\n}'\n```\n\n_Blockchain Wallet Address endpoint:_\n```\nhttp://localhost:8000/stars/address:[ADDRESS]\n```\n\nCurl example:\n```\ncurl \"http://localhost:8000/stars/address:142BDCeSGbXjWKaAnYXbMpZ6sbrSAo3DpZ\"\n```\n\n_Star Block Hash endpoint:_\n```\nhttp://localhost:8000/stars/hash:[HASH]\n```\n\nCurl example:\n```\ncurl \"http://localhost:8000/stars/hash:a59e9e399bc17c2db32a7a87379a8012f2c8e08dd661d7c0a6a4845d4f3ffb9f\"\n```\n\n_Star Block Height endpoint:_\n```\nhttp://localhost:8000/block/[HEIGHT]\n```\n\nCurl example:\n```\ncurl \"http://localhost:8000/block/1\"\n```\n\n## Udacity honor code\n\nGiving credits for places that helped me to do this project\n\n- Thanks  [Bruno Tom](https://github.com/ibrunotome) and [Deepak Gupta](https://github.com/deepakmits) for the help with the doubts.\n- [Express Validator Doc](https://express-validator.github.io/docs/custom-validators-sanitizers.html)\n- https://stackoverflow.com/questions/1787939/check-time-difference-in-javascript\n- https://stackoverflow.com/questions/14313183/javascript-regex-how-do-i-check-if-the-string-is-ascii-only\n- https://stackoverflow.com/questions/9177598/multiple-instances-of-a-leveldb-database-at-the-same-time\n\n#### Extra: Project best practices\n\n- [https://www.terlici.com/2014/08/25/best-practices-express-structure.html](https://www.terlici.com/2014/08/25/best-practices-express-structure.html)\n- [https://medium.com/@mwaysolutions/10-best-practices-for-better-restful-api-cbe81b06f291](https://medium.com/@mwaysolutions/10-best-practices-for-better-restful-api-cbe81b06f291)\n- [https://github.com/i0natan/nodebestpractices](https://github.com/i0natan/nodebestpractices)\n- [https://stackoverflow.com/questions/5178334/folder-structure-for-a-node-js-project](https://stackoverflow.com/questions/5178334/folder-structure-for-a-node-js-project)\n- [https://gist.github.com/lancejpollard/1398757](https://gist.github.com/lancejpollard/1398757)",
    "longname": "/home/samuel/Dropbox/Projects/udacity-blockchain-developer-nanodegree/project_4/README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"project_4\",\n  \"version\": \"1.0.0\",\n  \"description\": \"RESTful web API for private blockchain.\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"start\": \"nodemon server.js\",\n    \"esdoc\": \"esdoc\",\n    \"esdoc:open\": \"open ./docs/index.html || xdg-open ./docs/index.html\",\n    \"lint\": \"eslint --ext .js --ignore-path .gitignore .\",\n    \"lint:fix\": \"eslint --fix --ext .js --ignore-path .gitignore .\",\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/samuelterra22/udacity-blockchain-developer-nanodegree.git\"\n  },\n  \"keywords\": [\n    \"private\",\n    \"blockchain\",\n    \"web\",\n    \"api\",\n    \"udacity\",\n    \"nanodegree\"\n  ],\n  \"author\": \"Samuel Terra\",\n  \"license\": \"ISC\",\n  \"bugs\": {\n    \"url\": \"https://github.com/samuelterra22/udacity-blockchain-developer-nanodegree/issues\"\n  },\n  \"homepage\": \"https://github.com/samuelterra22/udacity-blockchain-developer-nanodegree#readme\",\n  \"dependencies\": {\n    \"bitcoinjs-lib\": \"^4.0.2\",\n    \"bitcoinjs-message\": \"^2.0.0\",\n    \"crypto-js\": \"^3.1.9-1\",\n    \"express\": \"^4.16.3\",\n    \"express-validator\": \"^5.3.0\",\n    \"level\": \"^4.0.0\"\n  },\n  \"devDependencies\": {\n    \"babel-eslint\": \"^10.0.1\",\n    \"esdoc\": \"^1.1.0\",\n    \"esdoc-brand-plugin\": \"^1.0.1\",\n    \"esdoc-coverage-plugin\": \"^1.1.0\",\n    \"esdoc-lint-plugin\": \"^1.0.2\",\n    \"esdoc-standard-plugin\": \"^1.0.0\",\n    \"eslint\": \"^5.6.1\",\n    \"eslint-config-prettier\": \"^3.1.0\",\n    \"eslint-loader\": \"^2.1.1\",\n    \"eslint-plugin-import\": \"^2.14.0\",\n    \"eslint-plugin-jest\": \"^21.24.1\",\n    \"eslint-plugin-mocha\": \"^5.2.0\",\n    \"eslint-plugin-node\": \"^7.0.1\",\n    \"eslint-plugin-prettier\": \"^3.0.0\",\n    \"eslint-plugin-security\": \"^1.4.0\",\n    \"nodemon\": \"^1.18.4\",\n    \"prettier\": \"^1.14.3\"\n  },\n  \"engines\": {\n    \"node\": \">=8.12.0\"\n  }\n}\n",
    "longname": "/home/samuel/Dropbox/Projects/udacity-blockchain-developer-nanodegree/project_4/package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  }
]